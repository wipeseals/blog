<!DOCTYPE html>
<html lang="en">

<head>
    <title>RPi Pico PIO + DMA 転送覚書 (MicroPython 版) | blog.wipeseals.me</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://blog.wipeseals.me/style.css">
    <link rel="stylesheet" href="https://blog.wipeseals.me/color/blue-light.css">

        <link rel="stylesheet" href="https://blog.wipeseals.me/color/background_light.css">
    
    <link rel="stylesheet" href="https://blog.wipeseals.me/font-hack.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="RPi Pico PIO + DMA 転送覚書 (MicroPython 版) | blog.wipeseals.me">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://blog.wipeseals.me/blog/2025/rpi-pico-pio-dma/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="RPi Pico PIO + DMA 転送覚書 (MicroPython 版) | blog.wipeseals.me">
    <meta property="twitter:domain" content="blog.wipeseals.me">
    <meta property="twitter:url" content="https://blog.wipeseals.me/blog/2025/rpi-pico-pio-dma/">

        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="/" style="text-decoration: none;">
                    <div class="logo">
                      
                            blog.wipeseals.me
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://blog.wipeseals.me">blog</a></li>
            
                <li><a href="https://blog.wipeseals.me/tags">tags</a></li>
            
                <li><a href="https://blog.wipeseals.me/archive">archive</a></li>
            
                <li><a href="https://blog.wipeseals.me/work">work</a></li>
            
                <li><a href="https://wipeseals.me">about</a></li>
            
                <li><a href="https://github.com/wipeseals" target="_blank" rel="noopener noreferrer">github</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://blog.wipeseals.me/blog/2025/rpi-pico-pio-dma/">RPi Pico PIO + DMA 転送覚書 (MicroPython 版)</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2025-06-03
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://blog.wipeseals.me/tags/dma/">#dma</a>&nbsp;
                <a class="post-tag" href="https://blog.wipeseals.me/tags/embedded/">#embedded</a>&nbsp;
                <a class="post-tag" href="https://blog.wipeseals.me/tags/micropython/">#micropython</a>&nbsp;
                <a class="post-tag" href="https://blog.wipeseals.me/tags/pio/">#pio</a>&nbsp;
                <a class="post-tag" href="https://blog.wipeseals.me/tags/raspberrypi/">#raspberrypi</a></span>
    

        <div class="post-content">
            <p>MicroPython を用いて Raspberry Pi Pico の PIO と DMA を使う方法についての覚書。それぞれの情報は入手できるが、TX_FIFO/RX_FIFO 両方に DMA する例がなかったので書き残す。</p>
<p>本内容は MicroPython のドキュメント並びに RP2040 の仕様書から抜粋した内容となっている。</p>
<h2 id="hw-shang-da-cheng-subekikoto">HW 上達成すべきこと</h2>
<p><code>PIOx_BASE</code> + <code>(T|R)XFy</code> のアドレスに読み書きを行うこと。</p>
<p>以下内容より PIO Address <code>x= (0|1)</code> と
<code>(T|R)XFy</code> のアドレス <code>y= (0|1|2|3)</code> を組み合わせて、PIO の TX_FIFO/RX_FIFO にアクセスする。</p>
<h3 id="piox-base"><code>PIOx_BASE</code></h3>
<p><code>PIOx_BASE</code> は、PIO の Base Address。 2.2. Address Map にて以下定義がなされている。</p>
<ul>
<li><code>PIO0_BASE</code> = <code>0x50200000</code></li>
<li><code>PIO1_BASE</code> = <code>0x50300000</code></li>
</ul>
<h3 id="t-r-xfy"><code>(T|R)XFy</code></h3>
<p><code>(T|R)XFy</code> は、PIO の TX_FIFO/RX_FIFO のレジスタ。Chapter 3. PIO 3.7. List of Registers にて以下定義がなされている。</p>
<table><thead><tr><th>Offset</th><th>Name</th></tr></thead><tbody>
<tr><td>0x010</td><td><code>TXF0</code></td></tr>
<tr><td>0x014</td><td><code>TXF1</code></td></tr>
<tr><td>0x018</td><td><code>TXF2</code></td></tr>
<tr><td>0x01C</td><td><code>TXF3</code></td></tr>
<tr><td>0x020</td><td><code>RXF0</code></td></tr>
<tr><td>0x024</td><td><code>RXF1</code></td></tr>
<tr><td>0x028</td><td><code>RXF2</code></td></tr>
<tr><td>0x02C</td><td><code>RXF3</code></td></tr>
</tbody></table>
<p>FIFO の空きに関連する情報は Offset 0x008 <code>FDEBUG</code> レジスタの <code>TXSTALL</code>, <code>TXOVER</code>, <code>RXUNDER</code>, <code>RXSTALL</code> 及び FLEVEL の <code>(T|R)Xy</code>から確認できる。</p>
<h3 id="dma-niokeru-fifo-status-noque-ren">DMA における FIFO Status の確認</h3>
<p>DMA が一方的にデータ転送しても FIFO にデータがないのに読み出したり、あるのに書き込んで溢れてしまう。これを防ぐため、ペリフェラル（ここでは PIO）のペースでデータ転送を行えるようなしくみがあり、 Data Request (DREQ) と呼ばれる設定を行う。</p>
<p>2.5.3.1 System DREQ Table の設定があり、PIO に関連する内容は以下のようになっている。</p>
<p><code>DREQ# = PIO# * 4 + (4 if RX else 0) + SM#</code></p>
<table><thead><tr><th>PIO</th><th>SM</th><th>PORT</th><th>DREQ#</th><th>Description</th></tr></thead><tbody>
<tr><td>0</td><td>0</td><td>TX</td><td>0</td><td>PIO0 SM0 TX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>TX</td><td>1</td><td>PIO0 SM1 TX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>TX</td><td>2</td><td>PIO0 SM2 TX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>TX</td><td>3</td><td>PIO0 SM3 TX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>RX</td><td>4</td><td>PIO0 SM0 RX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>RX</td><td>5</td><td>PIO0 SM1 RX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>RX</td><td>6</td><td>PIO0 SM2 RX DREQ</td></tr>
<tr><td>0</td><td>0</td><td>RX</td><td>7</td><td>PIO0 SM3 RX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>TX</td><td>8</td><td>PIO1 SM0 TX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>TX</td><td>9</td><td>PIO1 SM1 TX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>TX</td><td>10</td><td>PIO1 SM2 TX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>TX</td><td>11</td><td>PIO1 SM3 TX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>RX</td><td>12</td><td>PIO1 SM0 RX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>RX</td><td>13</td><td>PIO1 SM1 RX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>RX</td><td>14</td><td>PIO1 SM2 RX DREQ</td></tr>
<tr><td>1</td><td>0</td><td>RX</td><td>15</td><td>PIO1 SM3 RX DREQ</td></tr>
</tbody></table>
<h2 id="micropython-denoshi-zhuang">MicroPython での実装</h2>
<p>DMA class, PIO class, StateMachine class を使って、PIO の TX_FIFO/RX_FIFO に DMA 転送を行う。</p>
<p>入力されたデータを Echo する PIO プログラムを実行し、TX_FIFO と RX_FIFO の両方に DMA 転送を行う例を示す。</p>
<pre data-lang="python" style="background-color:#ffffff;color:#010101;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#898989;"># 送受信するデータ
</span><span>tx_data </span><span style="color:#016692;">= </span><span>array.</span><span style="color:#696989;">array</span><span>(</span><span style="color:#009f78;">&quot;I&quot;</span><span>, [</span><span style="color:#8c008a;">0x12345678</span><span>, </span><span style="color:#8c008a;">0x9ABCDEF0</span><span>, </span><span style="color:#8c008a;">0xDEADBEEF</span><span>, </span><span style="color:#8c008a;">0xFEEDFACE</span><span>]) </span><span style="color:#898989;"># test data
</span><span>rx_data </span><span style="color:#016692;">= </span><span>array.</span><span style="color:#696989;">array</span><span>(</span><span style="color:#009f78;">&quot;I&quot;</span><span>, [</span><span style="color:#8c008a;">0</span><span>] </span><span style="color:#016692;">* </span><span style="color:#7a7025;">len</span><span>(tx_data))
</span><span>
</span><span>
</span><span style="color:#898989;"># PIO プログラムの定義
</span><span>@rp2.</span><span style="color:#696989;">asm_pio</span><span>(
</span><span>    </span><span style="color:#898989;"># out, sideset, shift方向, autopush等の設定がここで行える
</span><span>)
</span><span style="color:#016692;">def </span><span style="color:#a15001;">pio_echoback</span><span>():
</span><span>    </span><span style="color:#898989;"># PIO asm本体。ここではTX_FIFOの内容をRX_FIFOにそのまま返す
</span><span>    </span><span style="color:#696989;">wrap_target</span><span>()
</span><span>    </span><span style="color:#696989;">pull</span><span>(block)
</span><span>    </span><span style="color:#696989;">out</span><span>(x, </span><span style="color:#8c008a;">32</span><span>)
</span><span>    </span><span style="color:#696989;">in_</span><span>(x, </span><span style="color:#8c008a;">32</span><span>)
</span><span>    </span><span style="color:#696989;">push</span><span>(block)
</span><span>    </span><span style="color:#696989;">wrap</span><span>()
</span><span>
</span><span style="color:#898989;"># PIO0 State Machine 0を起動
</span><span>sm0 </span><span style="color:#016692;">= </span><span>rp2.</span><span style="color:#696989;">StateMachine</span><span>(</span><span style="color:#8c008a;">0</span><span>)
</span><span>sm0.</span><span style="color:#696989;">init</span><span>(
</span><span>    </span><span style="color:#696989;">prog</span><span style="color:#016692;">=</span><span>pio_echoback,
</span><span>    </span><span style="color:#696989;">freq</span><span style="color:#016692;">=</span><span style="color:#8c008a;">125_000_000</span><span>,  </span><span style="color:#898989;"># 125MHz
</span><span>    </span><span style="color:#898989;"># pin設定, 周波数設定等の設定が行える
</span><span>)
</span><span>sm0.</span><span style="color:#696989;">active</span><span>(</span><span style="color:#8c008a;">1</span><span>)
</span><span>
</span><span>
</span><span style="color:#898989;"># Setup TX DMA
</span><span>tx_dma0 </span><span style="color:#016692;">= </span><span>rp2.</span><span style="color:#696989;">DMA</span><span>()
</span><span>tx_dma0_ctrl </span><span style="color:#016692;">= </span><span>tx_dma0.</span><span style="color:#696989;">pack_ctrl</span><span>(
</span><span>    </span><span style="color:#696989;">size</span><span style="color:#016692;">=</span><span style="color:#8c008a;">2</span><span>,  </span><span style="color:#898989;"># 0=1byte, 1=2byte, 2=4byte転送
</span><span>    </span><span style="color:#696989;">inc_read</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,
</span><span>    </span><span style="color:#696989;">inc_write</span><span style="color:#016692;">=</span><span style="color:#333366;">False</span><span>,  </span><span style="color:#898989;"># PIO0 TXF0は場所固定なのでincrementしない
</span><span>    </span><span style="color:#696989;">treq_sel</span><span style="color:#016692;">=</span><span style="color:#8c008a;">0</span><span>,  </span><span style="color:#898989;"># PIO0 SM0 TX DREQ
</span><span>)
</span><span>tx_dma0.</span><span style="color:#696989;">config</span><span>(
</span><span>    </span><span style="color:#696989;">read</span><span style="color:#016692;">=</span><span>tx_data,  </span><span style="color:#898989;"># 転送元データをそのまま渡す
</span><span>    </span><span style="color:#696989;">write</span><span style="color:#016692;">=</span><span>sm0,  </span><span style="color:#898989;"># state machine をそのまま渡す
</span><span>    </span><span style="color:#696989;">count</span><span style="color:#016692;">=</span><span style="color:#7a7025;">len</span><span>(
</span><span>        tx_data
</span><span>    ),  </span><span style="color:#898989;"># 転送byte数ではなく、pack_ctrlのsizeで指定した単位での転送数なので注意
</span><span>    </span><span style="color:#696989;">ctrl</span><span style="color:#016692;">=</span><span>tx_dma0_ctrl,
</span><span>    </span><span style="color:#696989;">trigger</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,  </span><span style="color:#898989;"># 開始
</span><span>)
</span><span>
</span><span style="color:#898989;"># Setup RX DMA
</span><span>rx_dma0 </span><span style="color:#016692;">= </span><span>rp2.</span><span style="color:#696989;">DMA</span><span>()
</span><span>rx_dma0_ctrl </span><span style="color:#016692;">= </span><span>rx_dma0.</span><span style="color:#696989;">pack_ctrl</span><span>(
</span><span>    </span><span style="color:#696989;">size</span><span style="color:#016692;">=</span><span style="color:#8c008a;">2</span><span>,  </span><span style="color:#898989;"># 0=1byte, 1=2byte, 2=4byte転送
</span><span>    </span><span style="color:#696989;">inc_read</span><span style="color:#016692;">=</span><span style="color:#333366;">False</span><span>,  </span><span style="color:#898989;"># PIO0 RXF0は場所固定なのでincrementしない
</span><span>    </span><span style="color:#696989;">inc_write</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,
</span><span>    </span><span style="color:#696989;">treq_sel</span><span style="color:#016692;">=</span><span style="color:#8c008a;">4</span><span>,  </span><span style="color:#898989;"># PIO0 SM0 RX DREQ
</span><span>)
</span><span>rx_dma0.</span><span style="color:#696989;">config</span><span>(
</span><span>    </span><span style="color:#696989;">read</span><span style="color:#016692;">=</span><span>sm0,  </span><span style="color:#898989;"># state machine をそのまま渡す
</span><span>    </span><span style="color:#696989;">write</span><span style="color:#016692;">=</span><span>rx_data,  </span><span style="color:#898989;"># 転送先データをそのまま渡す
</span><span>    </span><span style="color:#696989;">count</span><span style="color:#016692;">=</span><span style="color:#7a7025;">len</span><span>(
</span><span>        tx_data
</span><span>    ),  </span><span style="color:#898989;"># 転送byte数ではなく、pack_ctrlのsizeで指定した単位での転送数なので注意
</span><span>    </span><span style="color:#696989;">ctrl</span><span style="color:#016692;">=</span><span>rx_dma0_ctrl,
</span><span>    </span><span style="color:#696989;">trigger</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,
</span><span>)
</span><span>
</span><span style="color:#898989;"># 転送完了待ち
</span><span style="color:#016692;">while </span><span>rx_dma0.</span><span style="color:#696989;">active</span><span>():
</span><span>    </span><span style="color:#016692;">pass
</span><span>
</span><span style="color:#898989;"># 結果確認
</span><span style="color:#016692;">for </span><span>i </span><span style="color:#016692;">in </span><span style="color:#7a7025;">range</span><span>(</span><span style="color:#7a7025;">len</span><span>(rx_data)):
</span><span>    </span><span style="color:#7a7025;">print</span><span>(</span><span style="color:#877611;">f</span><span style="color:#009f78;">&quot;TX Data[</span><span>{i}</span><span style="color:#009f78;">]: </span><span>{tx_data[i]</span><span style="color:#333366;">:#010x</span><span>}</span><span style="color:#009f78;">, RX Data[</span><span>{i}</span><span style="color:#009f78;">]: </span><span>{rx_data[i]</span><span style="color:#333366;">:#010x</span><span>}</span><span style="color:#009f78;">&quot;</span><span>)
</span><span>    </span><span style="color:#016692;">assert </span><span>tx_data[i] </span><span style="color:#016692;">== </span><span>rx_data[i], (
</span><span>        </span><span style="color:#877611;">f</span><span style="color:#009f78;">&quot;Data mismatch at index </span><span>{i}</span><span style="color:#009f78;">: </span><span>{tx_data[i]</span><span style="color:#333366;">:#010x</span><span>}</span><span style="color:#009f78;"> != </span><span>{rx_data[i]</span><span style="color:#333366;">:#010x</span><span>}</span><span style="color:#009f78;">&quot;
</span><span>    )
</span><span>
</span><span style="color:#898989;"># 終了処理
</span><span>sm0.</span><span style="color:#696989;">active</span><span>(</span><span style="color:#8c008a;">0</span><span>)
</span><span>tx_dma0.</span><span style="color:#696989;">close</span><span>()
</span><span>rx_dma0.</span><span style="color:#696989;">close</span><span>()
</span></code></pre>
<p>出力</p>
<pre data-lang="log" style="background-color:#ffffff;color:#010101;" class="language-log "><code class="language-log" data-lang="log"><span>TX Data[0]: 0x12345678, RX Data[0]: 0x12345678
</span><span>TX Data[1]: 0x9abcdef0, RX Data[1]: 0x9abcdef0
</span><span>TX Data[2]: 0xdeadbeef, RX Data[2]: 0xdeadbeef
</span><span>TX Data[3]: 0xfeedface, RX Data[3]: 0xfeedface
</span></code></pre>
<h2 id="tips">Tips</h2>
<h3 id="byteswap-sitai">byteswap したい</h3>
<p>pio program 中でエンディアンが入れ替わってしまうケースなどを想定。BSWAP option があり、これは DMA の設定で行える</p>
<pre data-lang="python" style="background-color:#ffffff;color:#010101;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#898989;"># Setup RX DMA
</span><span>rx_dma0 </span><span style="color:#016692;">= </span><span>rp2.</span><span style="color:#696989;">DMA</span><span>()
</span><span>rx_dma0_ctrl </span><span style="color:#016692;">= </span><span>rx_dma0.</span><span style="color:#696989;">pack_ctrl</span><span>(
</span><span>    </span><span style="color:#696989;">size</span><span style="color:#016692;">=</span><span style="color:#8c008a;">2</span><span>,  </span><span style="color:#898989;"># 0=1byte, 1=2byte, 2=4byte転送
</span><span>    </span><span style="color:#696989;">inc_read</span><span style="color:#016692;">=</span><span style="color:#333366;">False</span><span>,  </span><span style="color:#898989;"># PIO0 RXF0は場所固定なのでincrementしない
</span><span>    </span><span style="color:#696989;">inc_write</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,
</span><span>    </span><span style="color:#696989;">bswap</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,  </span><span style="color:#898989;"># 受信データはBig Endianなので、バイトオーダーを反転
</span><span>    </span><span style="color:#696989;">treq_sel</span><span style="color:#016692;">=</span><span style="color:#8c008a;">4</span><span>,  </span><span style="color:#898989;"># PIO0 SM0 RX DREQ
</span><span>)
</span></code></pre>
<p>実行結果</p>
<pre data-lang="log" style="background-color:#ffffff;color:#010101;" class="language-log "><code class="language-log" data-lang="log"><span>TX Data[0]: 0x12345678, RX Data[0]: 0x78563412
</span><span>Traceback (most recent call last):
</span><span>  File &quot;&lt;stdin&gt;&quot;, line 444, in &lt;module&gt;
</span><span>AssertionError: Data mismatch at index 0: 0x12345678 != 0x78563412
</span></code></pre>
<h3 id="1byte-zutuzhuan-song-sitai">1byte ずつ転送したい</h3>
<p><code>size=0</code> を指定することで、1byte ずつ転送できる。転送カウント数に注意</p>
<pre data-lang="python" style="background-color:#ffffff;color:#010101;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#898989;"># Setup TX DMA
</span><span>tx_dma0 </span><span style="color:#016692;">= </span><span>rp2.</span><span style="color:#696989;">DMA</span><span>()
</span><span>tx_dma0_ctrl </span><span style="color:#016692;">= </span><span>tx_dma0.</span><span style="color:#696989;">pack_ctrl</span><span>(
</span><span>    </span><span style="color:#696989;">size</span><span style="color:#016692;">=</span><span style="color:#8c008a;">0</span><span>,  </span><span style="color:#898989;"># 0=1byte, 1=2byte, 2=4byte転送
</span><span>    </span><span style="color:#696989;">inc_read</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,
</span><span>    </span><span style="color:#696989;">inc_write</span><span style="color:#016692;">=</span><span style="color:#333366;">False</span><span>,  </span><span style="color:#898989;"># PIO0 TXF0は場所固定なのでincrementしない
</span><span>    </span><span style="color:#696989;">treq_sel</span><span style="color:#016692;">=</span><span style="color:#8c008a;">0</span><span>,  </span><span style="color:#898989;"># PIO0 SM0 TX DREQ
</span><span>)
</span><span>tx_dma0.</span><span style="color:#696989;">config</span><span>(
</span><span>    </span><span style="color:#696989;">read</span><span style="color:#016692;">=</span><span>tx_data,  </span><span style="color:#898989;"># 転送元データをそのまま渡す
</span><span>    </span><span style="color:#696989;">write</span><span style="color:#016692;">=</span><span>sm0,  </span><span style="color:#898989;"># state machine をそのまま渡す
</span><span>    </span><span style="color:#696989;">count</span><span style="color:#016692;">=</span><span style="color:#7a7025;">len</span><span>(tx_data) </span><span style="color:#016692;">* </span><span style="color:#8c008a;">4</span><span>,  </span><span style="color:#898989;"># 転送byte数ではなく、pack_ctrlのsizeで指定した単位での転送数なので注意
</span><span>    </span><span style="color:#696989;">ctrl</span><span style="color:#016692;">=</span><span>tx_dma0_ctrl,
</span><span>    </span><span style="color:#696989;">trigger</span><span style="color:#016692;">=</span><span style="color:#333366;">True</span><span>,  </span><span style="color:#898989;"># 開始
</span><span>)
</span><span>
</span><span style="color:#898989;"># RX側も同様に修正
</span></code></pre>
<p>結果</p>
<pre data-lang="log" style="background-color:#ffffff;color:#010101;" class="language-log "><code class="language-log" data-lang="log"><span>TX Data[0]: 0x12345678, RX Data[0]: 0x12345678
</span><span>TX Data[1]: 0x9abcdef0, RX Data[1]: 0x9abcdef0
</span><span>TX Data[2]: 0xdeadbeef, RX Data[2]: 0xdeadbeef
</span><span>TX Data[3]: 0xfeedface, RX Data[3]: 0xfeedface
</span></code></pre>
<h3 id="sniff-sitai-chain-sitai">sniff したい、chain したい、...</h3>
<p><code>DMA.pack_ctrl()</code> や園周辺を読むと概ねやりたいことは記載があるはず。先に示した例を下に改造・改良していくことを推奨。</p>
<p><a href="https://micropython-docs-ja.readthedocs.io/ja/latest/library/rp2.DMA.html#rp2.DMA.pack_ctrl">MicroPython library - rp2.DMA</a></p>
<h2 id="zhong-warini">終わりに</h2>
<p><code>DMA.config</code> の <code>read</code>, <code>write</code> に Peripheral が来るケースでの指定がいまいち読み取りづらかったので書き残した。</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://micropython-docs-ja.readthedocs.io/ja/latest/library/rp2.html">MicroPython library - rp2</a></li>
<li><a href="https://datasheets.raspberrypi.com/rp2040/rp2040-datasheet.pdf">RP2040 Datasheet</a></li>
</ul>

        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read more</span>
                    <hr />
                </div>
                <div class="pagination__buttons">
                        <span class="button previous">
                            <a href="https://blog.wipeseals.me/blog/2025/build-riscv-tests-on-docker/">
                                <span class="button__icon">←</span>&nbsp;
                                <span class="button__text">Docker で riscv-tests をビルドする</span>
                            </a>
                        </span>
                    
                    </div>
            </div>
        
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">Copyright &copy; 2025 wipeseals</div>
            </div>
    </footer>
    

</div>
</body>

</html>
